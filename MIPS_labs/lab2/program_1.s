.data
v1: .double 1, 2, 3,4,5,6.5,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,3.47,8,9,1,1, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1
v2: .double 1, 2, 1, 3,5,7,9.6,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6
v3: .double 1, 2, 3,4,5,6,7,8,0.9,1,1, 2, 3,4,5,6,7,8,9,1,0.00021, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1,1, 2, 3,4,5,6,7,8,9,1
v4: .double 1, 2, 1, 3,5,7,9,2,4.24,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6,1, 2, 1, 3,5,7,9,2,4,6



v5: .space 480  # 60* 64 bit =60*8byte
v6: .space 480
v7: .space 480


#for (i = 0; i < 60; i++){	
#	v5[i] = ((v1[i]+v2[i]) * v3[i])+v4[i];
#	v6[i] = v5[i]/(v4[i]*v1[i]);
#   v7[i] = v6[i]*(v2[i]+v3[i]);
#}


.text

MAIN:
    dadd R3, R0, R0             #i
    daddi R1, R0, 60 

loop:

    l.d f1, v1(R3)
    l.d f2, v2(R3)
    l.d f3, v3(R3)
    l.d f4, v4(R3)
    
    add.d f10, f1, f2       #v1+v2
    mul.d f10, f10, f3       # *v3
    add.d f10, f10, f4       # +v4

    s.d f10, v5(R3)          # v5->f10

    mul.d f11, f4, f1         #v4*v1
    div.d f11, f10, f11                 # v5/v4*v1

    s.d f11, v6(R3)             # v6->f11


    add.d f12, f2, f3                #v2+v3
    mul.d f12, f12, f11         # v6*(v2+v3)

    s.d f12, v7(R3)             # v7->f12

    daddi R3,R3, 8
    daddi R1, R1, -1
    
    bnez R1, loop

    nop
    

halt

